Ø4
aD:\Documents\GitHub\MovieMood\review_handler\review_handler.WebUI\Controllers\ReviewController.cs
	namespace 	
review_handler
 
. 
API 
. 
Controllers (
{ 
[ 
Route 

(
 
$str .
). /
]/ 0
[		 
ApiController		 
]		 
[

 

ApiVersion

 
(

 
$str

 
)

 
]

 
public 

class 
ReviewController !
:" #
ControllerBase$ 2
{ 
private 
readonly 
	IMediator "
	_mediator# ,
;, -
public 
ReviewController 
(  
	IMediator  )
mediator* 2
)2 3
=>4 6
	_mediator7 @
=A B
mediatorC K
;K L
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Create) /
(/ 0
[0 1
FromBody1 9
]9 :
CreateReviewCommand; N
commandO V
)V W
{ 	
var 
result 
= 
await 
	_mediator (
.( )
Send) -
(- .
command. 5
)5 6
;6 7
return 

StatusCode 
( 
( 
int "
)" #
result# )
.) *

StatusCode* 4
,4 5
result6 <
.< =
Entity= C
)C D
;D E
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetById) 0
(0 1
Guid1 5
id6 8
)8 9
{ 	
var 
result 
= 
await 
	_mediator (
.( )
Send) -
(- .
new. 1
GetReviewById2 ?
(? @
)@ A
{B C
IdD F
=G H
idI K
}L M
)M N
;N O
return 
result 
. 
	IsSuccess #
? 
Ok 
( 
result 
. 
Entity "
)" #
: 

StatusCode 
( 
( 
int !
)! "
result" (
.( )

StatusCode) 3
,3 4
result5 ;
.; <
Message< C
)C D
;D E
} 	
[!! 	
HttpGet!!	 
(!! 
$str!! %
)!!% &
]!!& '
public"" 
async"" 
Task"" 
<"" 
IActionResult"" '
>""' (
GetAllOfUser"") 5
(""5 6
Guid""6 :
userId""; A
)""A B
{## 	
var$$ 
result$$ 
=$$ 
await$$ 
	_mediator$$ (
.$$( )
Send$$) -
($$- .
new$$. 1
GetAllReviewsOfUser$$2 E
($$E F
)$$F G
{$$H I
UserId$$J P
=$$Q R
userId$$S Y
}$$Z [
)$$[ \
;$$\ ]
return%% 
result%% 
.%% 
	IsSuccess%% #
?&& 
Ok&& 
(&& 
result&& 
.&& 
Entity&& "
)&&" #
:'' 

StatusCode'' 
('' 
('' 
int'' !
)''! "
result''" (
.''( )

StatusCode'') 3
,''3 4
result''5 ;
.''; <
Message''< C
)''C D
;''D E
}(( 	
[** 	
HttpGet**	 
(** 
$str** '
)**' (
]**( )
public++ 
async++ 
Task++ 
<++ 
IActionResult++ '
>++' (
GetAllOfMovie++) 6
(++6 7
Guid++7 ;
movieId++< C
)++C D
{,, 	
var-- 
result-- 
=-- 
await-- 
	_mediator-- (
.--( )
Send--) -
(--- .
new--. 1 
GetAllReviewsOfMovie--2 F
(--F G
)--G H
{--I J
MovieId--K R
=--S T
movieId--U \
}--] ^
)--^ _
;--_ `
return.. 
result.. 
... 
	IsSuccess.. #
?// 
Ok// 
(// 
result// 
.// 
Entity// "
)//" #
:00 

StatusCode00 
(00 
(00 
int00 !
)00! "
result00" (
.00( )

StatusCode00) 3
,003 4
result005 ;
.00; <
Message00< C
)00C D
;00D E
}11 	
[33 	
HttpPut33	 
(33 
$str33 
)33 
]33 
public44 
async44 
Task44 
<44 
IActionResult44 '
>44' (
UpdateReview44) 5
(445 6
UpdateReviewCommand446 I
command44J Q
)44Q R
{55 	
var66 
result66 
=66 
await66 
	_mediator66 (
.66( )
Send66) -
(66- .
command66. 5
)665 6
;666 7
return77 

StatusCode77 
(77 
(77 
int77 "
)77" #
result77# )
.77) *

StatusCode77* 4
)774 5
;775 6
}88 	
[;; 	

HttpDelete;;	 
(;; 
$str;; 
);;  
];;  !
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
DeleteReview<<) 5
(<<5 6
Guid<<6 :
id<<; =
)<<= >
{== 	
var>> 
result>> 
=>> 
await>> 
	_mediator>> (
.>>( )
Send>>) -
(>>- .
new>>. 1
DeleteReviewCommand>>2 E
(>>E F
)>>F G
{>>H I
Id>>J L
=>>M N
id>>O Q
}>>R S
)>>S T
;>>T U
return?? 

StatusCode?? 
(?? 
(?? 
int?? "
)??" #
result??# )
.??) *

StatusCode??* 4
)??4 5
;??5 6
}@@ 	
}AA 
}BB Æ
LD:\Documents\GitHub\MovieMood\review_handler\review_handler.WebUI\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder

 
.

 
Services

 
.

 
AddApiVersioning

 !
(

! "
o

" #
=>

$ &
{ 
o 
. /
#AssumeDefaultVersionWhenUnspecified )
=* +
true, 0
;0 1
o 
. 
DefaultApiVersion 
= 
new 
	Microsoft '
.' (

AspNetCore( 2
.2 3
Mvc3 6
.6 7

ApiVersion7 A
(A B
$numB C
,C D
$numE F
)F G
;G H
o 
. 
ReportApiVersions 
= 
true 
; 
o 
. 
ApiVersionReader 
= 
ApiVersionReader )
.) *
Combine* 1
( 	
new '
QueryStringApiVersionReader +
(+ ,
$str, 9
)9 :
,: ;
new "
HeaderApiVersionReader &
(& '
$str' 2
)2 3
,3 4
new %
MediaTypeApiVersionReader )
() *
$str* /
)/ 0
) 	
;	 

} 
) 
; 
builder 
. 
Services 
. #
AddVersionedApiExplorer (
(( )
options 
=> 
{ 
options 
. 
GroupNameFormat 
=  !
$str" *
;* +
options 
. %
SubstituteApiVersionInUrl )
=* +
true, 0
;0 1
} 
) 
; 
builder   
.   
Services   
.   #
AddEndpointsApiExplorer   (
(  ( )
)  ) *
;  * +
builder!! 
.!! 
Services!! 
.!! 
AddSwaggerGen!! 
(!! 
)!!  
;!!  !
builder"" 
."" 
Services"" 
."" "
AddApplicationServices"" '
(""' (
)""( )
;"") *
builder## 
.## 
Services## 
.## $
AddInfrastrutureServices## )
(##) *
builder##* 1
.##1 2
Configuration##2 ?
)##? @
;##@ A
builder$$ 
.$$ 
Services$$ 
.$$ 
AddHealthChecks$$  
($$  !
)$$! "
;$$" #
var&& 
app&& 
=&& 	
builder&&
 
.&& 
Build&& 
(&& 
)&& 
;&& 
app'' 
.'' 
UseHealthChecks'' 
('' 
$str'' 
)'' 
;'' 
if** 
(** 
app** 
.** 
Environment** 
.** 
IsDevelopment** !
(**! "
)**" #
)**# $
{++ 
app,, 
.,, 

UseSwagger,, 
(,, 
),, 
;,, 
app-- 
.-- 
UseSwaggerUI-- 
(-- 
)-- 
;-- 
}.. 
app00 
.00 
UseHttpsRedirection00 
(00 
)00 
;00 
app22 
.22 
UseAuthorization22 
(22 
)22 
;22 
app44 
.44 
MapControllers44 
(44 
)44 
;44 
app66 
.66 
Run66 
(66 
)66 	
;66	 
