ı
_D:\Documents\GitHub\MovieMood\review_handler\review_handler.Infrastructure\ConfigureServices.cs
	namespace 	
review_handler
 
. 
Infrastructure '
{ 
public 

static 
class 
ConfigureServices )
{ 
public 
static 
IServiceCollection ($
AddInfrastrutureServices) A
(A B
thisB F
IServiceCollectionG Y
servicesZ b
,b c
IConfigurationd r
configuration	s Ä
)
Ä Å
{ 	
services 
. 
	AddScoped 
( 
typeof %
(% &
IRepository& 1
<1 2
>2 3
)3 4
,4 5
typeof6 <
(< =

Repository= G
<G H
>H I
)I J
)J K
;K L
services 
. 
	AddScoped 
( 
typeof %
(% &
IUnitOfWork& 1
)1 2
,2 3
typeof4 :
(: ;

UnitOfWork; E
)E F
)F G
;G H
services 
. 
	AddScoped 
< 
IMovieRepository /
,/ 0
MovieRepository1 @
>@ A
(A B
)B C
;C D
services 
. 
	AddScoped 
< 
IReviewRepository 0
,0 1
ReviewRepository2 B
>B C
(C D
)D E
;E F
services 
. 
	AddScoped 
< 
IUserRepository .
,. /
UserRepository0 >
>> ?
(? @
)@ A
;A B
services 
. 
AddDbContext !
<! "
DatabaseContext" 1
>1 2
( 
m 
=> 
m 
. 
UseSqlServer  
(  !
configuration! .
.. /
GetConnectionString/ B
(B C
$strC P
)P Q
)Q R
,R S
ServiceLifetimeT c
.c d
	Singletond m
)m n
;n o
return 
services 
; 
} 	
} 
} ¸
bD:\Documents\GitHub\MovieMood\review_handler\review_handler.Infrastructure\Data\DatabaseContext.cs
	namespace 	
review_handler
 
. 
Infrastructure '
.' (
Data( ,
{ 
public 

class 
DatabaseContext  
:! "
	DbContext# ,
,, -
IDatabaseContext. >
{ 
public 
DatabaseContext 
( 
DbContextOptions /
options0 7
)7 8
:9 :
base; ?
(? @
options@ G
)G H
{ 	
Database 
. 
EnsureCreated "
(" #
)# $
;$ %
} 	
public 
DbSet 
< 
User 
> 
User 
=>  "
Set# &
<& '
User' +
>+ ,
(, -
)- .
;. /
public 
DbSet 
< 
Review 
> 
Review #
=>$ &
Set' *
<* +
Review+ 1
>1 2
(2 3
)3 4
;4 5
public 
DbSet 
< 
Movie 
> 
Movies "
=># %
Set& )
<) *
Movie* /
>/ 0
(0 1
)1 2
;2 3
public 
void 
Save 
( 
) 
=> 
SaveChanges )
() *
)* +
;+ ,
} 
} “
]D:\Documents\GitHub\MovieMood\review_handler\review_handler.Infrastructure\Data\UnitOfWork.cs
	namespace 	
review_handler
 
. 
Infrastructure '
.' (
Data( ,
{		 
public

 

class

 

UnitOfWork

 
:

 
IUnitOfWork

 )
{ 
private 
readonly 
DatabaseContext (
_context) 1
;1 2
private 
IMovieRepository  
movieRepository! 0
;0 1
private 
IReviewRepository !
reviewRepository" 2
;2 3
private 
IUserRepository 
userRepository  .
;. /
public 

UnitOfWork 
( 
DatabaseContext )
context* 1
)1 2
=>3 5
_context6 >
=? @
contextA H
;H I
public 
IRepository 
< 
Movie  
>  !
MovieRepository" 1
{ 	
get 
{ 
movieRepository 
??=  #
new$ '
MovieRepository( 7
(7 8
_context8 @
)@ A
;A B
return 
movieRepository &
;& '
} 
} 	
public 
IRepository 
< 
Review !
>! "
ReviewRepository# 3
{ 	
get 
{   
reviewRepository!!  
??=!!! $
new!!% (
ReviewRepository!!) 9
(!!9 :
_context!!: B
)!!B C
;!!C D
return"" 
reviewRepository"" '
;""' (
}## 
}$$ 	
public&& 
IRepository&& 
<&& 
User&& 
>&&  
UserRepository&&! /
{'' 	
get(( 
{)) 
userRepository** 
??=** "
new**# &
UserRepository**' 5
(**5 6
_context**6 >
)**> ?
;**? @
return++ 
userRepository++ %
;++% &
},, 
}-- 	
public// 
async// 
Task// 
SaveChanges// %
(//% &
)//& '
=>//( *
await//+ 0
_context//1 9
.//9 :
SaveChangesAsync//: J
(//J K
)//K L
;//L M
}00 
}11 è¨
uD:\Documents\GitHub\MovieMood\review_handler\review_handler.Infrastructure\Migrations\20231205202128_InitialCreate.cs
	namespace 	
review_handler
 
. 
Infrastructure '
.' (

Migrations( 2
{ 
public 

partial 
class 
InitialCreate &
:' (
	Migration) 2
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
Guid& *
>* +
(+ ,
type, 0
:0 1
$str2 D
,D E
nullableF N
:N O
falseP U
)U V
,V W
	FirstName 
= 
table  %
.% &
Column& ,
<, -
string- 3
>3 4
(4 5
type5 9
:9 :
$str; J
,J K
nullableL T
:T U
trueV Z
)Z [
,[ \
LastName 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
trueU Y
)Y Z
,Z [
DateOfBirth 
=  !
table" '
.' (
Column( .
<. /
DateTime/ 7
>7 8
(8 9
type9 =
:= >
$str? J
,J K
nullableL T
:T U
falseV [
)[ \
,\ ]
	Biography 
= 
table  %
.% &
Column& ,
<, -
string- 3
>3 4
(4 5
type5 9
:9 :
$str; J
,J K
nullableL T
:T U
trueV Z
)Z [
,[ \
Nationality 
=  !
table" '
.' (
Column( .
<. /
string/ 5
>5 6
(6 7
type7 ;
:; <
$str= L
,L M
nullableN V
:V W
trueX \
)\ ]
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 0
,0 1
x2 3
=>4 6
x7 8
.8 9
Id9 ;
); <
;< =
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str !
,! "
columns 
: 
table 
=> !
new" %
{   
Id!! 
=!! 
table!! 
.!! 
Column!! %
<!!% &
Guid!!& *
>!!* +
(!!+ ,
type!!, 0
:!!0 1
$str!!2 D
,!!D E
nullable!!F N
:!!N O
false!!P U
)!!U V
,!!V W
	FirstName"" 
="" 
table""  %
.""% &
Column""& ,
<"", -
string""- 3
>""3 4
(""4 5
type""5 9
:""9 :
$str""; J
,""J K
nullable""L T
:""T U
true""V Z
)""Z [
,""[ \
LastName## 
=## 
table## $
.##$ %
Column##% +
<##+ ,
string##, 2
>##2 3
(##3 4
type##4 8
:##8 9
$str##: I
,##I J
nullable##K S
:##S T
true##U Y
)##Y Z
,##Z [
DateOfBirth$$ 
=$$  !
table$$" '
.$$' (
Column$$( .
<$$. /
DateTime$$/ 7
>$$7 8
($$8 9
type$$9 =
:$$= >
$str$$? J
,$$J K
nullable$$L T
:$$T U
false$$V [
)$$[ \
,$$\ ]
	Biography%% 
=%% 
table%%  %
.%%% &
Column%%& ,
<%%, -
string%%- 3
>%%3 4
(%%4 5
type%%5 9
:%%9 :
$str%%; J
,%%J K
nullable%%L T
:%%T U
true%%V Z
)%%Z [
,%%[ \
Nationality&& 
=&&  !
table&&" '
.&&' (
Column&&( .
<&&. /
string&&/ 5
>&&5 6
(&&6 7
type&&7 ;
:&&; <
$str&&= L
,&&L M
nullable&&N V
:&&V W
true&&X \
)&&\ ]
}'' 
,'' 
constraints(( 
:(( 
table(( "
=>((# %
{)) 
table** 
.** 

PrimaryKey** $
(**$ %
$str**% 3
,**3 4
x**5 6
=>**7 9
x**: ;
.**; <
Id**< >
)**> ?
;**? @
}++ 
)++ 
;++ 
migrationBuilder-- 
.-- 
CreateTable-- (
(--( )
name.. 
:.. 
$str.. 
,.. 
columns// 
:// 
table// 
=>// !
new//" %
{00 
Id11 
=11 
table11 
.11 
Column11 %
<11% &
Guid11& *
>11* +
(11+ ,
type11, 0
:110 1
$str112 D
,11D E
nullable11F N
:11N O
false11P U
)11U V
,11V W
Username22 
=22 
table22 $
.22$ %
Column22% +
<22+ ,
string22, 2
>222 3
(223 4
type224 8
:228 9
$str22: I
,22I J
nullable22K S
:22S T
true22U Y
)22Y Z
,22Z [
Email33 
=33 
table33 !
.33! "
Column33" (
<33( )
string33) /
>33/ 0
(330 1
type331 5
:335 6
$str337 F
,33F G
nullable33H P
:33P Q
true33R V
)33V W
,33W X
Password44 
=44 
table44 $
.44$ %
Column44% +
<44+ ,
string44, 2
>442 3
(443 4
type444 8
:448 9
$str44: I
,44I J
nullable44K S
:44S T
true44U Y
)44Y Z
,44Z [
Role55 
=55 
table55  
.55  !
Column55! '
<55' (
string55( .
>55. /
(55/ 0
type550 4
:554 5
$str556 E
,55E F
nullable55G O
:55O P
true55Q U
)55U V
}66 
,66 
constraints77 
:77 
table77 "
=>77# %
{88 
table99 
.99 

PrimaryKey99 $
(99$ %
$str99% .
,99. /
x990 1
=>992 4
x995 6
.996 7
Id997 9
)999 :
;99: ;
}:: 
):: 
;:: 
migrationBuilder<< 
.<< 
CreateTable<< (
(<<( )
name== 
:== 
$str== 
,== 
columns>> 
:>> 
table>> 
=>>> !
new>>" %
{?? 
Id@@ 
=@@ 
table@@ 
.@@ 
Column@@ %
<@@% &
Guid@@& *
>@@* +
(@@+ ,
type@@, 0
:@@0 1
$str@@2 D
,@@D E
nullable@@F N
:@@N O
false@@P U
)@@U V
,@@V W
TitleAA 
=AA 
tableAA !
.AA! "
ColumnAA" (
<AA( )
stringAA) /
>AA/ 0
(AA0 1
typeAA1 5
:AA5 6
$strAA7 F
,AAF G
nullableAAH P
:AAP Q
trueAAR V
)AAV W
,AAW X
DateBB 
=BB 
tableBB  
.BB  !
ColumnBB! '
<BB' (
DateTimeBB( 0
>BB0 1
(BB1 2
typeBB2 6
:BB6 7
$strBB8 C
,BBC D
nullableBBE M
:BBM N
falseBBO T
)BBT U
,BBU V
CategoryCC 
=CC 
tableCC $
.CC$ %
ColumnCC% +
<CC+ ,
intCC, /
>CC/ 0
(CC0 1
typeCC1 5
:CC5 6
$strCC7 <
,CC< =
nullableCC> F
:CCF G
falseCCH M
)CCM N
,CCN O
DescriptionDD 
=DD  !
tableDD" '
.DD' (
ColumnDD( .
<DD. /
stringDD/ 5
>DD5 6
(DD6 7
typeDD7 ;
:DD; <
$strDD= L
,DDL M
nullableDDN V
:DDV W
trueDDX \
)DD\ ]
,DD] ^
ActorIdEE 
=EE 
tableEE #
.EE# $
ColumnEE$ *
<EE* +
GuidEE+ /
>EE/ 0
(EE0 1
typeEE1 5
:EE5 6
$strEE7 I
,EEI J
nullableEEK S
:EES T
trueEEU Y
)EEY Z
}FF 
,FF 
constraintsGG 
:GG 
tableGG "
=>GG# %
{HH 
tableII 
.II 

PrimaryKeyII $
(II$ %
$strII% 0
,II0 1
xII2 3
=>II4 6
xII7 8
.II8 9
IdII9 ;
)II; <
;II< =
tableJJ 
.JJ 

ForeignKeyJJ $
(JJ$ %
nameKK 
:KK 
$strKK 8
,KK8 9
columnLL 
:LL 
xLL  !
=>LL" $
xLL% &
.LL& '
ActorIdLL' .
,LL. /
principalTableMM &
:MM& '
$strMM( 0
,MM0 1
principalColumnNN '
:NN' (
$strNN) -
)NN- .
;NN. /
}OO 
)OO 
;OO 
migrationBuilderQQ 
.QQ 
CreateTableQQ (
(QQ( )
nameRR 
:RR 
$strRR 
,RR 
columnsSS 
:SS 
tableSS 
=>SS !
newSS" %
{TT 
IdUU 
=UU 
tableUU 
.UU 
ColumnUU %
<UU% &
GuidUU& *
>UU* +
(UU+ ,
typeUU, 0
:UU0 1
$strUU2 D
,UUD E
nullableUUF N
:UUN O
falseUUP U
)UUU V
,UUV W
TitleVV 
=VV 
tableVV !
.VV! "
ColumnVV" (
<VV( )
stringVV) /
>VV/ 0
(VV0 1
typeVV1 5
:VV5 6
$strVV7 F
,VVF G
nullableVVH P
:VVP Q
trueVVR V
)VVV W
,VVW X
ReleaseDateWW 
=WW  !
tableWW" '
.WW' (
ColumnWW( .
<WW. /
DateTimeWW/ 7
>WW7 8
(WW8 9
typeWW9 =
:WW= >
$strWW? J
,WWJ K
nullableWWL T
:WWT U
falseWWV [
)WW[ \
,WW\ ]

DirectorIdXX 
=XX  
tableXX! &
.XX& '
ColumnXX' -
<XX- .
GuidXX. 2
>XX2 3
(XX3 4
typeXX4 8
:XX8 9
$strXX: L
,XXL M
nullableXXN V
:XXV W
trueXXX \
)XX\ ]
,XX] ^
RaitingYY 
=YY 
tableYY #
.YY# $
ColumnYY$ *
<YY* +
doubleYY+ 1
>YY1 2
(YY2 3
typeYY3 7
:YY7 8
$strYY9 @
,YY@ A
nullableYYB J
:YYJ K
falseYYL Q
)YYQ R
}ZZ 
,ZZ 
constraints[[ 
:[[ 
table[[ "
=>[[# %
{\\ 
table]] 
.]] 

PrimaryKey]] $
(]]$ %
$str]]% 0
,]]0 1
x]]2 3
=>]]4 6
x]]7 8
.]]8 9
Id]]9 ;
)]]; <
;]]< =
table^^ 
.^^ 

ForeignKey^^ $
(^^$ %
name__ 
:__ 
$str__ >
,__> ?
column`` 
:`` 
x``  !
=>``" $
x``% &
.``& '

DirectorId``' 1
,``1 2
principalTableaa &
:aa& '
$straa( 3
,aa3 4
principalColumnbb '
:bb' (
$strbb) -
)bb- .
;bb. /
}cc 
)cc 
;cc 
migrationBuilderee 
.ee 
CreateTableee (
(ee( )
nameff 
:ff 
$strff 
,ff 
columnsgg 
:gg 
tablegg 
=>gg !
newgg" %
{hh 
Idii 
=ii 
tableii 
.ii 
Columnii %
<ii% &
Guidii& *
>ii* +
(ii+ ,
typeii, 0
:ii0 1
$strii2 D
,iiD E
nullableiiF N
:iiN O
falseiiP U
)iiU V
,iiV W
MovieIdjj 
=jj 
tablejj #
.jj# $
Columnjj$ *
<jj* +
Guidjj+ /
>jj/ 0
(jj0 1
typejj1 5
:jj5 6
$strjj7 I
,jjI J
nullablejjK S
:jjS T
falsejjU Z
)jjZ [
,jj[ \
UserIdkk 
=kk 
tablekk "
.kk" #
Columnkk# )
<kk) *
Guidkk* .
>kk. /
(kk/ 0
typekk0 4
:kk4 5
$strkk6 H
,kkH I
nullablekkJ R
:kkR S
falsekkT Y
)kkY Z
,kkZ [
MovieRatingll 
=ll  !
tablell" '
.ll' (
Columnll( .
<ll. /
intll/ 2
>ll2 3
(ll3 4
typell4 8
:ll8 9
$strll: ?
,ll? @
nullablellA I
:llI J
falsellK P
)llP Q
,llQ R

CastRatingmm 
=mm  
tablemm! &
.mm& '
Columnmm' -
<mm- .
intmm. 1
>mm1 2
(mm2 3
typemm3 7
:mm7 8
$strmm9 >
,mm> ?
nullablemm@ H
:mmH I
truemmJ N
)mmN O
,mmO P
DirectorRatingnn "
=nn# $
tablenn% *
.nn* +
Columnnn+ 1
<nn1 2
intnn2 5
>nn5 6
(nn6 7
typenn7 ;
:nn; <
$strnn= B
,nnB C
nullablennD L
:nnL M
truennN R
)nnR S
,nnS T
GenreRatingoo 
=oo  !
tableoo" '
.oo' (
Columnoo( .
<oo. /
intoo/ 2
>oo2 3
(oo3 4
typeoo4 8
:oo8 9
$stroo: ?
,oo? @
nullableooA I
:ooI J
trueooK O
)ooO P
,ooP Q
SciptRatingpp 
=pp  !
tablepp" '
.pp' (
Columnpp( .
<pp. /
intpp/ 2
>pp2 3
(pp3 4
typepp4 8
:pp8 9
$strpp: ?
,pp? @
nullableppA I
:ppI J
trueppK O
)ppO P
,ppP Q

ReviewTextqq 
=qq  
tableqq! &
.qq& '
Columnqq' -
<qq- .
stringqq. 4
>qq4 5
(qq5 6
typeqq6 :
:qq: ;
$strqq< K
,qqK L
nullableqqM U
:qqU V
trueqqW [
)qq[ \
}rr 
,rr 
constraintsss 
:ss 
tabless "
=>ss# %
{tt 
tableuu 
.uu 

PrimaryKeyuu $
(uu$ %
$struu% 0
,uu0 1
xuu2 3
=>uu4 6
xuu7 8
.uu8 9
Iduu9 ;
)uu; <
;uu< =
}vv 
)vv 
;vv 
migrationBuilderxx 
.xx 
CreateTablexx (
(xx( )
nameyy 
:yy 
$stryy "
,yy" #
columnszz 
:zz 
tablezz 
=>zz !
newzz" %
{{{ 
CastId|| 
=|| 
table|| "
.||" #
Column||# )
<||) *
Guid||* .
>||. /
(||/ 0
type||0 4
:||4 5
$str||6 H
,||H I
nullable||J R
:||R S
false||T Y
)||Y Z
,||Z [
FilmographyId}} !
=}}" #
table}}$ )
.}}) *
Column}}* 0
<}}0 1
Guid}}1 5
>}}5 6
(}}6 7
type}}7 ;
:}}; <
$str}}= O
,}}O P
nullable}}Q Y
:}}Y Z
false}}[ `
)}}` a
}~~ 
,~~ 
constraints 
: 
table "
=># %
{
ÄÄ 
table
ÅÅ 
.
ÅÅ 

PrimaryKey
ÅÅ $
(
ÅÅ$ %
$str
ÅÅ% 4
,
ÅÅ4 5
x
ÅÅ6 7
=>
ÅÅ8 :
new
ÅÅ; >
{
ÅÅ? @
x
ÅÅA B
.
ÅÅB C
CastId
ÅÅC I
,
ÅÅI J
x
ÅÅK L
.
ÅÅL M
FilmographyId
ÅÅM Z
}
ÅÅ[ \
)
ÅÅ\ ]
;
ÅÅ] ^
table
ÇÇ 
.
ÇÇ 

ForeignKey
ÇÇ $
(
ÇÇ$ %
name
ÉÉ 
:
ÉÉ 
$str
ÉÉ ;
,
ÉÉ; <
column
ÑÑ 
:
ÑÑ 
x
ÑÑ  !
=>
ÑÑ" $
x
ÑÑ% &
.
ÑÑ& '
CastId
ÑÑ' -
,
ÑÑ- .
principalTable
ÖÖ &
:
ÖÖ& '
$str
ÖÖ( 0
,
ÖÖ0 1
principalColumn
ÜÜ '
:
ÜÜ' (
$str
ÜÜ) -
,
ÜÜ- .
onDelete
áá  
:
áá  !
ReferentialAction
áá" 3
.
áá3 4
Cascade
áá4 ;
)
áá; <
;
áá< =
table
àà 
.
àà 

ForeignKey
àà $
(
àà$ %
name
ââ 
:
ââ 
$str
ââ B
,
ââB C
column
ää 
:
ää 
x
ää  !
=>
ää" $
x
ää% &
.
ää& '
FilmographyId
ää' 4
,
ää4 5
principalTable
ãã &
:
ãã& '
$str
ãã( 0
,
ãã0 1
principalColumn
åå '
:
åå' (
$str
åå) -
,
åå- .
onDelete
çç  
:
çç  !
ReferentialAction
çç" 3
.
çç3 4
Cascade
çç4 ;
)
çç; <
;
çç< =
}
éé 
)
éé 
;
éé 
migrationBuilder
êê 
.
êê 
CreateIndex
êê (
(
êê( )
name
ëë 
:
ëë 
$str
ëë 3
,
ëë3 4
table
íí 
:
íí 
$str
íí #
,
íí# $
column
ìì 
:
ìì 
$str
ìì '
)
ìì' (
;
ìì( )
migrationBuilder
ïï 
.
ïï 
CreateIndex
ïï (
(
ïï( )
name
ññ 
:
ññ 
$str
ññ )
,
ññ) *
table
óó 
:
óó 
$str
óó 
,
óó  
column
òò 
:
òò 
$str
òò !
)
òò! "
;
òò" #
migrationBuilder
öö 
.
öö 
CreateIndex
öö (
(
öö( )
name
õõ 
:
õõ 
$str
õõ ,
,
õõ, -
table
úú 
:
úú 
$str
úú 
,
úú  
column
ùù 
:
ùù 
$str
ùù $
)
ùù$ %
;
ùù% &
migrationBuilder
üü 
.
üü 
CreateIndex
üü (
(
üü( )
name
†† 
:
†† 
$str
†† (
,
††( )
table
°° 
:
°° 
$str
°° 
,
°°  
column
¢¢ 
:
¢¢ 
$str
¢¢  
)
¢¢  !
;
¢¢! "
}
££ 	
	protected
¶¶ 
override
¶¶ 
void
¶¶ 
Down
¶¶  $
(
¶¶$ %
MigrationBuilder
¶¶% 5
migrationBuilder
¶¶6 F
)
¶¶F G
{
ßß 	
migrationBuilder
®® 
.
®® 
	DropTable
®® &
(
®®& '
name
©© 
:
©© 
$str
©© "
)
©©" #
;
©©# $
migrationBuilder
´´ 
.
´´ 
	DropTable
´´ &
(
´´& '
name
¨¨ 
:
¨¨ 
$str
¨¨ 
)
¨¨ 
;
¨¨  
migrationBuilder
ÆÆ 
.
ÆÆ 
	DropTable
ÆÆ &
(
ÆÆ& '
name
ØØ 
:
ØØ 
$str
ØØ 
)
ØØ 
;
ØØ  
migrationBuilder
±± 
.
±± 
	DropTable
±± &
(
±±& '
name
≤≤ 
:
≤≤ 
$str
≤≤ 
)
≤≤ 
;
≤≤  
migrationBuilder
¥¥ 
.
¥¥ 
	DropTable
¥¥ &
(
¥¥& '
name
µµ 
:
µµ 
$str
µµ 
)
µµ 
;
µµ  
migrationBuilder
∑∑ 
.
∑∑ 
	DropTable
∑∑ &
(
∑∑& '
name
∏∏ 
:
∏∏ 
$str
∏∏ 
)
∏∏ 
;
∏∏ 
migrationBuilder
∫∫ 
.
∫∫ 
	DropTable
∫∫ &
(
∫∫& '
name
ªª 
:
ªª 
$str
ªª !
)
ªª! "
;
ªª" #
}
ºº 	
}
ΩΩ 
}ææ “
jD:\Documents\GitHub\MovieMood\review_handler\review_handler.Infrastructure\Repositories\Base\Repository.cs
	namespace 	
review_handler
 
. 
Infrastructure '
.' (
Repositories( 4
.4 5
Base5 9
{ 
public 

class 

Repository 
< 
T 
> 
:  
IRepository! ,
<, -
T- .
>. /
where0 5
T6 7
:8 9
class: ?
{ 
	protected		 
readonly		 
DatabaseContext		 *
context		+ 2
;		2 3
public 

Repository 
( 
DatabaseContext )
petOwnerContext* 9
)9 :
=>; =
this> B
.B C
contextC J
=K L
petOwnerContextM \
;\ ]
public 
virtual 
async 
Task !
<! "
IReadOnlyList" /
</ 0
T0 1
>1 2
>2 3
GetAllAsync4 ?
(? @
)@ A
=>B D
awaitE J
contextK R
.R S
SetS V
<V W
TW X
>X Y
(Y Z
)Z [
.[ \
ToListAsync\ g
(g h
)h i
;i j
public 
virtual 
async 
Task !
<! "
T" #
># $
GetByIdAsync% 1
(1 2
Guid2 6
id7 9
)9 :
=>; =
await> C
contextD K
.K L
SetL O
<O P
TP Q
>Q R
(R S
)S T
.T U
	FindAsyncU ^
(^ _
id_ a
)a b
;b c
public 
async 
Task 
< 
T 
> 
AddAsync %
(% &
T& '
entity( .
). /
{ 	
await 
context 
. 
Set 
< 
T 
>  
(  !
)! "
." #
AddAsync# +
(+ ,
entity, 2
)2 3
;3 4
await 
context 
. 
SaveChangesAsync *
(* +
)+ ,
;, -
return 
entity 
; 
} 	
public 
async 
Task 
DeleteAsync %
(% &
T& '
entity( .
). /
{ 	
context 
. 
Set 
< 
T 
> 
( 
) 
. 
Remove #
(# $
entity$ *
)* +
;+ ,
await 
context 
. 
SaveChangesAsync *
(* +
)+ ,
;, -
} 	
public!! 
async!! 
Task!! 
UpdateAsync!! %
(!!% &
T!!& '
entity!!( .
)!!. /
{"" 	
context## 
.## 
Update## 
(## 
entity## !
)##! "
;##" #
await$$ 
context$$ 
.$$ 
SaveChangesAsync$$ *
($$* +
)$$+ ,
;$$, -
}%% 	
public'' 
async'' 
Task'' 
SaveChanges'' %
(''% &
)''& '
=>''( *
await''+ 0
context''1 8
.''8 9
SaveChangesAsync''9 I
(''I J
)''J K
;''K L
}(( 
})) Â
jD:\Documents\GitHub\MovieMood\review_handler\review_handler.Infrastructure\Repositories\MovieRepository.cs
	namespace 	
review_handler
 
. 
Infrastructure '
.' (
Repositories( 4
{ 
public 

class 
MovieRepository  
:! "

Repository# -
<- .
Movie. 3
>3 4
,4 5
IMovieRepository6 F
{		 
public

 
MovieRepository

 
(

 
DatabaseContext

 .
context

/ 6
)

6 7
:

8 9
base

: >
(

> ?
context

? F
)

F G
{

H I
}

J K
} 
} Í
kD:\Documents\GitHub\MovieMood\review_handler\review_handler.Infrastructure\Repositories\ReviewRepository.cs
	namespace 	
review_handler
 
. 
Infrastructure '
.' (
Repositories( 4
{ 
public		 

class		 
ReviewRepository		 !
:		" #

Repository		$ .
<		. /
Review		/ 5
>		5 6
,		6 7
IReviewRepository		8 I
{

 
public 
ReviewRepository 
(  
DatabaseContext  /
context0 7
)7 8
:9 :
base; ?
(? @
context@ G
)G H
{I J
}K L
} 
} ‡
iD:\Documents\GitHub\MovieMood\review_handler\review_handler.Infrastructure\Repositories\UserRepository.cs
	namespace 	
review_handler
 
. 
Infrastructure '
.' (
Repositories( 4
{ 
public 

class 
UserRepository 
:  !

Repository" ,
<, -
User- 1
>1 2
,2 3
IUserRepository4 C
{		 
public

 
UserRepository

 
(

 
DatabaseContext

 -
context

. 5
)

5 6
:

7 8
base

9 =
(

= >
context

> E
)

E F
{

G H
}

I J
} 
} 